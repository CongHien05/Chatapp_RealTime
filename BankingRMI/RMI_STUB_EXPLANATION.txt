RMI STUB - GIáº¢I THÃCH CHI TIáº¾T
================================

1. STUB LÃ€ GÃŒ?
--------------
Stub (hay "stub object") lÃ  má»™t Ä‘á»‘i tÆ°á»£ng PROXY (Ä‘áº¡i diá»‡n) Ä‘Æ°á»£c RMI tá»± Ä‘á»™ng táº¡o ra.

- Stub Ä‘áº¡i diá»‡n cho Ä‘á»‘i tÆ°á»£ng Remote trÃªn server
- Client khÃ´ng trá»±c tiáº¿p gá»i Ä‘á»‘i tÆ°á»£ng server, mÃ  gá»i qua stub
- Stub chá»‹u trÃ¡ch nhiá»‡m:
  * Serialize tham sá»‘ method
  * Gá»­i request qua network tá»›i server
  * Nháº­n response tá»« server
  * Deserialize káº¿t quáº£ tráº£ vá»
  * Tráº£ vá» cho client code

2. STUB ÄÆ¯á»¢C Táº O á» ÄÃ‚U?
------------------------
Stub Ä‘Æ°á»£c RMI tá»± Ä‘á»™ng táº¡o khi:
- Server bind Ä‘á»‘i tÆ°á»£ng vÃ o Registry
- Client lookup Ä‘á»‘i tÆ°á»£ng tá»« Registry

Trong code cá»§a báº¡n:

ğŸ“ SERVER SIDE (Server.java):
```
BankingImpl bankingService = new BankingImpl();  // Äá»‘i tÆ°á»£ng tháº­t
registry.bind("BankingService", bankingService); // RMI tá»± Ä‘á»™ng táº¡o stub á»Ÿ Ä‘Ã¢y
```

Khi bind, RMI tá»± Ä‘á»™ng:
1. Táº¡o stub class cho BankingImpl (tÃªn: BankingImpl_Stub.class)
2. LÆ°u stub vÃ o Registry
3. Client sáº½ nháº­n stub nÃ y khi lookup

ğŸ“ CLIENT SIDE (ClientServiceImpl.java - dÃ²ng 50):
```
bankingService = (IBanking) Naming.lookup("BankingService");
```

Khi lookup, client nháº­n vá»:
- KHÃ”NG pháº£i Ä‘á»‘i tÆ°á»£ng BankingImpl tháº­t
- MÃ€ lÃ  stub object (BankingImpl_Stub) Ä‘áº¡i diá»‡n cho BankingImpl

3. STUB ÄÆ¯á»¢C LÆ¯U á» ÄÃ‚U?
------------------------
Stub class Ä‘Æ°á»£c generate tá»± Ä‘á»™ng vÃ  lÆ°u á»Ÿ:

ğŸ“ ThÆ° má»¥c build/compile output:
- IntelliJ IDEA: `out/production/BankingRMI/server/` hoáº·c `target/classes/server/`
- Eclipse: `bin/server/`
- File tÃªn: `BankingImpl_Stub.class`

ğŸ“ Cáº¥u trÃºc file stub:
```
server/
  â”œâ”€â”€ BankingImpl.class          (class gá»‘c)
  â”œâ”€â”€ BankingImpl_Stub.class     (stub - Ä‘Æ°á»£c RMI tá»± Ä‘á»™ng táº¡o)
  â””â”€â”€ BankingImpl_Skel.class     (skeleton - cÅ©, Java 8+ khÃ´ng cáº§n)
```

4. STUB HOáº T Äá»˜NG NHÆ¯ THáº¾ NÃ€O?
-------------------------------
Khi client gá»i method:

```
Client Code:
  bankingService.deposit(accountId, 1000);
         â†“
  [STUB] BankingImpl_Stub.deposit()
         â†“
  Serialize: accountId, 1000 â†’ bytes
         â†“
  Network: Gá»­i qua RMI protocol
         â†“
  Server: BankingImpl.deposit() thá»±c thi
         â†“
  Network: Tráº£ vá» káº¿t quáº£
         â†“
  [STUB] Deserialize káº¿t quáº£
         â†“
  Client nháº­n: boolean success
```

5. VÃ Dá»¤ TRONG CODE Cá»¦A Báº N
----------------------------
File: src/client/ClientServiceImpl.java

DÃ²ng 15:
```java
private IBanking bankingService;  // Biáº¿n nÃ y chá»©a STUB, khÃ´ng pháº£i BankingImpl tháº­t
```

DÃ²ng 50:
```java
bankingService = (IBanking) Naming.lookup("BankingService");
// â†‘ ÄÃ¢y chÃ­nh lÃ  lÃºc client nháº­n STUB tá»« registry
// bankingService giá» lÃ  BankingImpl_Stub, khÃ´ng pháº£i BankingImpl
```

DÃ²ng 78, 112, 148, 194:
```java
bankingService.checkBalance(accountId);  // Gá»i qua stub
bankingService.deposit(accountId, amount); // Gá»i qua stub
bankingService.withdraw(accountId, amount); // Gá»i qua stub
bankingService.transfer(accountId, toAccount, amount); // Gá»i qua stub
```

Má»—i láº§n gá»i, stub sáº½:
1. Serialize tham sá»‘
2. Gá»­i request tá»›i server
3. Nháº­n response
4. Deserialize vÃ  tráº£ vá»

6. Táº I SAO Cáº¦N STUB?
--------------------
âœ… Che giáº¥u complexity: Client code khÃ´ng cáº§n biáº¿t vá» network, serialization
âœ… Type safety: Stub implement cÃ¹ng interface (IBanking) â†’ type-safe
âœ… Transparent: Client gá»i nhÆ° gá»i method local, nhÆ°ng thá»±c táº¿ lÃ  remote call
âœ… RMI tá»± Ä‘á»™ng xá»­ lÃ½: Network errors, serialization, deserialization

7. CÃCH XEM STUB CLASS (Náº¿u muá»‘n)
----------------------------------
Sau khi compile vÃ  cháº¡y server Ã­t nháº¥t 1 láº§n:

1. Má»Ÿ thÆ° má»¥c build output:
   - IntelliJ: File â†’ Project Structure â†’ Project â†’ Compiler output
   - Hoáº·c tÃ¬m trong `out/` hoáº·c `target/`

2. TÃ¬m file: `server/BankingImpl_Stub.class`

3. CÃ³ thá»ƒ decompile báº±ng:
   - IntelliJ: Right-click â†’ Decompile
   - Hoáº·c dÃ¹ng: `javap -c server.BankingImpl_Stub`

8. LÆ¯U Ã QUAN TRá»ŒNG
-------------------
âš ï¸ Stub Ä‘Æ°á»£c táº¡o Tá»° Äá»˜NG bá»Ÿi RMI, báº¡n KHÃ”NG cáº§n viáº¿t code cho stub
âš ï¸ Stub class chá»‰ tá»“n táº¡i sau khi compile vÃ  cháº¡y server
âš ï¸ Client chá»‰ cáº§n interface (IBanking.class), khÃ´ng cáº§n BankingImpl.class
âš ï¸ Stub implement cÃ¹ng interface â†’ cÃ³ thá»ƒ cast vá» IBanking

9. SO SÃNH STUB vs SKELETON
----------------------------
- STUB (Client side):
  * Cháº¡y trÃªn client
  * Äáº¡i diá»‡n cho remote object
  * Gá»­i request tá»›i server

- SKELETON (Server side - Java 8+ khÃ´ng cáº§n):
  * Cháº¡y trÃªn server
  * Nháº­n request tá»« client
  * Gá»i method trÃªn remote object
  * Java 8+ dÃ¹ng dynamic proxy thay vÃ¬ skeleton

10. TÃ“M Táº®T
-----------
Stub = Äá»‘i tÆ°á»£ng proxy trÃªn client, Ä‘áº¡i diá»‡n cho remote object trÃªn server

ğŸ“ Táº¡o á»Ÿ Ä‘Ã¢u: Tá»± Ä‘á»™ng bá»Ÿi RMI khi server bind object
ğŸ“ LÆ°u á»Ÿ Ä‘Ã¢u: ThÆ° má»¥c build output (BankingImpl_Stub.class)
ğŸ“ DÃ¹ng á»Ÿ Ä‘Ã¢u: ClientServiceImpl.java, biáº¿n bankingService
ğŸ“ Khi nÃ o: Má»—i láº§n client gá»i method remote

Stub giÃºp báº¡n gá»i method trÃªn server nhÆ° gá»i method local, nhÆ°ng thá»±c táº¿
Ä‘ang giao tiáº¿p qua network!


