<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/javafx/17.0.2-ea" fx:controller="org.example.danbainoso.client.ui.ChatController" styleClass="root-pane">
    
    <left>
        <VBox spacing="0" styleClass="sidebar" prefWidth="280.0">
            <VBox alignment="CENTER_LEFT" spacing="5">
                <padding>
                    <Insets top="20" right="15" bottom="15" left="15"/>
                </padding>
                <Label text="DanBaiNoSo" styleClass="app-title">
                    <font>
                        <Font name="System Bold" size="20.0" />
                    </font>
                </Label>
                <Label text="Messaging App" styleClass="app-subtitle" textFill="#888888"/>
            </VBox>

            <HBox alignment="CENTER" spacing="10" styleClass="nav-container">
                <padding>
                    <Insets bottom="10.0" left="15.0" right="15.0" top="5.0" />
                </padding>
                <ToggleButton fx:id="btnTabContacts" text="Báº¡n bÃ¨" selected="true" maxWidth="Infinity" HBox.hgrow="ALWAYS" styleClass="nav-button, nav-button-left">
                    <toggleGroup>
                        <ToggleGroup fx:id="sidebarNav"/>
                    </toggleGroup>
                </ToggleButton>
                <ToggleButton fx:id="btnTabGroups" text="NhÃ³m" toggleGroup="$sidebarNav" maxWidth="Infinity" HBox.hgrow="ALWAYS" styleClass="nav-button, nav-button-right"/>
            </HBox>

            <StackPane VBox.vgrow="ALWAYS">
                <padding>
                    <Insets top="10" right="10" bottom="10" left="10"/>
                </padding>
                
                <VBox fx:id="contactsView" spacing="10" visible="true">
                    <ListView fx:id="contactsList" VBox.vgrow="ALWAYS" styleClass="custom-list-view" />
                    <Button fx:id="manageFriendsButton" text="ðŸ‘¥ Quáº£n lÃ½ báº¡n bÃ¨" maxWidth="Infinity" styleClass="btn-outline"/>
                </VBox>

                <VBox fx:id="groupsView" spacing="10" visible="false">
                    <ListView fx:id="groupsList" VBox.vgrow="ALWAYS" styleClass="custom-list-view" />
                    <Button fx:id="createGroupButton" text="âž• Táº¡o nhÃ³m má»›i" maxWidth="Infinity" styleClass="btn-accent"/>
                </VBox>
            </StackPane>
        </VBox>
    </left>

    <center>
        <VBox styleClass="chat-area">
            <HBox alignment="CENTER_LEFT" spacing="15" styleClass="chat-header" minHeight="60.0">
                <padding>
                    <Insets left="20.0" right="20.0" />
                </padding>
                
                <VBox alignment="CENTER_LEFT">
                    <Label fx:id="currentChatLabel" text="ChÃ o má»«ng trá»Ÿ láº¡i!" styleClass="chat-title">
                        <font>
                            <Font name="System Bold" size="18.0" />
                        </font>
                    </Label>
                    <Label fx:id="statusLabel" text="Trá»±c tuyáº¿n" textFill="#2ecc71" styleClass="status-text">
                        <font>
                             <Font size="12.0" />
                        </font>
                    </Label>
                </VBox>
                
                <Region HBox.hgrow="ALWAYS" />

                <HBox alignment="CENTER_RIGHT" spacing="10">
                    <Button fx:id="addFriendButton" text="Káº¿t báº¡n" visible="false" styleClass="btn-small, btn-primary"/>
                    <Button fx:id="blockButton" text="Cháº·n" visible="false" managed="false" styleClass="btn-small, btn-danger" />
                    <Button fx:id="groupSettingsButton" text="âš™" visible="false" managed="false" styleClass="btn-icon" />
                    <Button fx:id="leaveGroupButton" text="Rá»i nhÃ³m" visible="false" managed="false" styleClass="btn-small, btn-danger" />
                    <Button fx:id="logoutButton" text="ÄÄƒng xuáº¥t" styleClass="btn-small, btn-secondary" />
                </HBox>
            </HBox>

            <Separator />

            <ScrollPane fx:id="messagesScrollPane" fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" VBox.vgrow="ALWAYS" styleClass="message-scroll">
                <content>
                    <VBox fx:id="messagesContainer" spacing="15" styleClass="message-container">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>
                    </VBox>
                </content>
            </ScrollPane>

            <HBox spacing="15" alignment="CENTER" styleClass="input-area" minHeight="70.0">
                <padding>
                    <Insets left="20.0" right="20.0" top="10.0" bottom="10.0"/>
                </padding>
                
                <TextField fx:id="messageField" promptText="Nháº­p tin nháº¯n..." HBox.hgrow="ALWAYS" maxWidth="Infinity" styleClass="input-field"/>
                
                <Button fx:id="sendButton" onAction="#sendMessage" text="Gá»­i" styleClass="btn-send" minWidth="60"/>
            </HBox>
        </VBox>
    </center>
</BorderPane>